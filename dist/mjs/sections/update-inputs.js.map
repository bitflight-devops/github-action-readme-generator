{"version":3,"file":"update-inputs.js","sourceRoot":"","sources":["../../../src/sections/update-inputs.ts"],"names":[],"mappings":"AAQA,OAAO,EAAE,YAAY,EAAE,SAAS,EAAE,MAAM,eAAe,CAAC;AAExD,OAAO,OAAO,MAAM,qBAAqB,CAAC;AAC1C,OAAO,UAAU,MAAM,wBAAwB,CAAC;AAEhD,MAAM,CAAC,OAAO,UAAU,YAAY,CAAC,KAAoB,EAAE,MAAc;IACvE,MAAM,GAAG,GAAG,IAAI,OAAO,CAAC,KAAK,CAAC,CAAC;IAE/B,uBAAuB;IACvB,MAAM,OAAO,GAAa,EAAE,CAAC;IAC7B,MAAM,aAAa,GAAe,EAAE,CAAC;IACrC,MAAM,UAAU,GAAG,CAAC,OAAO,EAAE,aAAa,EAAE,SAAS,EAAE,UAAU,CAAC,CAAC;IACnE,MAAM,MAAM,GAAa,EAAE,CAAC;IAE5B,KAAK,MAAM,CAAC,IAAI,UAAU,EAAE;QAC1B,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC;KAC9B;IAED,aAAa,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IAE3B,MAAM,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC;IAClC,MAAM,EAAE,GAAG,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;IAE/C,IAAI,EAAE,GAAG,CAAC,EAAE;QACV,GAAG,CAAC,KAAK,EAAE,CAAC;QAEZ,KAAK,MAAM,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;YACnC,MAAM,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;YACzB,IAAI,WAAW,GAAG,MAAM,EAAE,WAAW,IAAI,EAAE,CAAC;YAE5C,2EAA2E;YAC3E,MAAM,OAAO,GAAG,kBAAkB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YAErD,IAAI,OAAO,IAAI,OAAO,CAAC,MAAM,IAAI,CAAC,EAAE;gBAClC,WAAW,GAAG,OAAO,CAAC,CAAC,CAAC,IAAI,WAAW,CAAC;aACzC;YAED,WAAW,GAAG,WAAW,CAAC,IAAI,EAAE,CAAC,OAAO,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;YAEzD,MAAM,GAAG,GAAa;gBACpB,SAAS,CAAC,GAAG,CAAC;gBACd,WAAW;gBACX,MAAM,EAAE,OAAO,CAAC,CAAC,CAAC,SAAS,MAAM,CAAC,OAAO,SAAS,CAAC,CAAC,CAAC,EAAE;gBACvD,MAAM,EAAE,QAAQ,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,WAAW;aAC5C,CAAC;YACF,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;YAC/B,aAAa,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;SACzB;QACD,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC,CAAC;QACxC,GAAG,CAAC,IAAI,CAAC,cAAc,EAAE,UAAU,KAAK,EAAE,CAAC,CAAC;QAC5C,MAAM,CAAC,YAAY,CAAC,aAAa,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;QAClD,GAAG,CAAC,OAAO,EAAE,CAAC;KACf;SAAM;QACL,GAAG,CAAC,KAAK,CAAC,iBAAiB,KAAK,EAAE,CAAC,CAAC;KACrC;AACH,CAAC","sourcesContent":["/**\n * This TypeScript code exports a function named 'updateInputs' which takes a token (ReadmeSection) and an instance of the 'Inputs' class as its parameters.\n * The function is responsible for updating the inputs section in the README.md file based on the provided inputs.\n * It utilizes the 'LogTask' class for logging purposes, 'columnHeader' and 'rowHeader' functions from '../helpers.js' for formatting table headers, and 'markdowner' function from '../markdowner/index.js' for generating markdown content.\n * @param {ReadmeSection} token - The token representing the section of the README to update.\n * @param {Inputs} inputs - The Inputs class instance.\n */\nimport { ReadmeSection } from '../constants.js';\nimport { columnHeader, rowHeader } from '../helpers.js';\nimport type Inputs from '../inputs.js';\nimport LogTask from '../logtask/index.js';\nimport markdowner from '../markdowner/index.js';\n\nexport default function updateInputs(token: ReadmeSection, inputs: Inputs): void {\n  const log = new LogTask(token);\n\n  // Build the new README\n  const content: string[] = [];\n  const markdownArray: string[][] = [];\n  const titleArray = ['Input', 'Description', 'Default', 'Required'];\n  const titles: string[] = [];\n\n  for (const t of titleArray) {\n    titles.push(columnHeader(t));\n  }\n\n  markdownArray.push(titles);\n\n  const vars = inputs.action.inputs;\n  const tI = vars ? Object.keys(vars).length : 0;\n\n  if (tI > 0) {\n    log.start();\n\n    for (const key of Object.keys(vars)) {\n      const values = vars[key];\n      let description = values?.description ?? '';\n\n      // Check if only the first line should be added (only subject without body)\n      const matches = /(.*?)\\n\\n([Ss]*)/.exec(description);\n\n      if (matches && matches.length >= 2) {\n        description = matches[1] || description;\n      }\n\n      description = description.trim().replace('\\n', '<br />');\n\n      const row: string[] = [\n        rowHeader(key),\n        description,\n        values?.default ? `<code>${values.default}</code>` : '',\n        values?.required ? '**true**' : '__false__',\n      ];\n      log.debug(JSON.stringify(row));\n      markdownArray.push(row);\n    }\n    content.push(markdowner(markdownArray));\n    log.info(`Action has ${tI} total ${token}`);\n    inputs.readmeEditor.updateSection(token, content);\n    log.success();\n  } else {\n    log.debug(`Action has no ${token}`);\n  }\n}\n"]}